# ============================================================================
# UI SPECIFICATION v0.0.2 - AI Agent Edition
# ============================================================================
# Self-describing format for executable UI specifications
# Philosophy: Purpose > Everything, Format > Tool, Progressive Precision
# AI reads structure natively without additional explanations
# ============================================================================
# yaml format with 2 spaces indent
# ----------------------------------------------------------------------------
# YAML STRING FORMATTING (IMPORTANT!)
# ----------------------------------------------------------------------------
#
# CRITICAL: Always use DOUBLE QUOTES for string values that:
# - Contain special characters: : { } [ ] , & * # ? | - < > = ! % @ \
# - Are multi-line or very long (100+ characters)
# - Contain leading/trailing spaces
#
# Examples:
#   CORRECT:
#   purpose: "Interactive card with hover effect. Shows title, tags, footer."
#   purpose: "Modal dialog 'Title' (centered overlay). Content, Cancel/Submit."
#
#   WRONG (missing quotes):
#   purpose: Interactive card with hover effect. Shows title, tags, footer.
#   purpose: Modal dialog 'Title' (centered overlay). Content, Cancel/Submit.
#
# For very long multi-line strings, prefer quoted strings:
#   purpose: "Glass card: width 100%, max-width 400px, padding 20px.
#     Header with title and icon. Body with content preview.
#     Footer with date and actions."
#
# ----------------------------------------------------------------------------
# CORE STRUCTURE
# ----------------------------------------------------------------------------

docType: ui-spec                      # Required: document type identifier
format_version: string                # Required: format specification version (e.g., "0.0.2")

metadata:
  name: string                        # Required: UI spec name (technical identifier)
  description: string                 # Required: Application purpose and main functionality
    # This is the KEY field for AI agents - describes WHAT the application does
    # Should be concise but clear (1-3 sentences)
    # Examples:
    #   "Task management application for teams with projects, tasks, and deadlines"
    #   "E-commerce storefront with product catalog, cart, and checkout"
    #   "Personal notes app with rich text editing and folder organization"
    # NOTE: This field is included in implementation prompts instead of 'name'
    #       'name' is purely technical and NOT passed to implementation AI
  theme: string                       # Optional: visual theme description (include if user wants)
    # Examples: "modern minimal", "glassmorphism with soft shadows", "glassmorphism, outline flat SVG icons"
  background: string                  # Optional: background description (include when relevant)
    # Examples: "gradient blue to purple", "nature photo darkened, overlay opacity 0.4"
  palette: object                     # Optional: color semantics (NOT hex codes)
    # Examples: {primary: "soft blue gradient", accent: "warm orange"}
    # Detailed: {glass-primary: "rgba(255,255,255,0.8) backdrop blur 20px"}

# ----------------------------------------------------------------------------
# TEMPLATES (optional - include when screens share common layouts)
# ----------------------------------------------------------------------------

templates:
  template_id:                        # Unique ID (snake_case, ^[a-z][a-z0-9_]*$)
    purpose: string                   # Required: 10+ chars, template description
    regions:                          # Required: >=1 region, exactly 1 type:content
      - id: string                    # Required: unique within template
        type: string                  # Required: static | content | floating
        position: string              # Required: left|right|top|bottom|center (static/content), top-left|top-right|bottom-left|bottom-right|center (floating)
        fullHeight: boolean           # Optional: true for left/right regions spanning full height
        fixed: boolean                # Optional: true for sticky/fixed positioning (static only)
        purpose: string               # Optional: region description
        blocks:                       # For type:static and floating only (NOT content)
          - id: string                # Required: unique within region
            type: string              # Optional: main_navigation | logo | user_profile | custom
            purpose: string           # Required: descriptive enough for intent
            blocks: []                # Optional: nested blocks (recursive structure)

default_template: string              # Optional: template_id for screens without explicit template

# ----------------------------------------------------------------------------
# NAVIGATION (optional - include when app has multiple screens)
# ----------------------------------------------------------------------------

navigation:
  items:                              # Navigation items
    - id: string                      # Unique ID
      label: string                   # Display label
      target: string                  # Target screen_id (must exist)

# ----------------------------------------------------------------------------
# SCREEN GROUPS (optional - for specs with many screens)
# ----------------------------------------------------------------------------

screen_groups:                          # Optional: group screens for organization
  - id: string                          # Required: group ID (snake_case, displayed as title)
    screens: [string]                   # Required: list of screen_ids
  # Auto-add when screens > 15, or on user request
  # Screens not in any group -> "Other" section

# ----------------------------------------------------------------------------
# SCREENS (required)
# ----------------------------------------------------------------------------

screens:
  screen_id:                          # Unique ID (snake_case, ^[a-z][a-z0-9_]*$)
    title: string                     # Required: 1+ chars, screen title
    purpose: string                   # Required: 10+ chars, screen description
      # Length: write enough to be clear (typically 20+ chars, more for complex screens)
    template: string                  # Optional: template_id (uses default_template if omitted)
    container_max_width: string       # Optional: max width (800px, 100%, 90vw)
    blocks:                           # Optional at exploration, recommended when structure known
      - id: string                    # Required: unique within screen (^[a-z][a-z0-9_]*$)
        columns: integer              # Optional: 1-12, default 12 (Bootstrap grid)
        purpose: string               # Required: descriptive enough for intent (core field!)
          # ALWAYS use double quotes for purpose values!
          # Describe: WHERE positioned, WHAT elements, WHAT data, WHAT actions
          # Reference palette: palette.color_name
          # Examples (with quotes):
          #   purpose: "Header with logo, navigation menu, and user profile."
          #   purpose: "Modal dialog 'Create Task' (centered overlay). Form with fields, Cancel/Submit buttons."
          #   purpose: "Button 'Create', onClick opens modal_id"
          # Length: short for simple blocks, detailed for complex (include specs if needed)
        blocks: []                    # Optional: nested blocks (recursive)
          # Same structure: {id!, columns?, purpose!, blocks?}
          # Nesting depth: as deep as structure requires

# ----------------------------------------------------------------------------
# DETAILING PHILOSOPHY (Progressive Precision)
# ----------------------------------------------------------------------------

detailing_philosophy:
  core_principle: "User intent always takes priority over level guidelines"

  approach: |
    Levels are RECOMMENDATIONS, not rigid rules.
    - If user requests specific detail (e.g., theme at L0), include it
    - Nesting depth follows content needs, not arbitrary numbers
    - Purpose length reflects necessary clarity, not character counts
    - Different screens can have different detail levels in same spec

  level_guidance:
    exploration:
      intent: "Discover what screens/features are needed"
      typical: ["metadata.name", "metadata.description (REQUIRED)", "screens with id/title/purpose"]
      optional_if_user_wants: ["theme", "basic blocks", "navigation hints"]

    general_structure:
      intent: "Define basic blocks and layout"
      typical: ["+blocks array", "+theme", "+columns"]
      optional_if_user_wants: ["palette hints", "deeper nesting", "templates"]

    detailed_structure:
      intent: "Detailed behavior without visual design"
      typical: ["+detailed purposes", "+palette (semantic)", "+templates", "+navigation"]
      optional_if_user_wants: ["exact specs for specific components"]

    full_control:
      intent: "Implementation-ready with exact specifications"
      typical: ["everything + exact specs (sizes, styles, animations)"]

  flexible_guidelines:
    purpose_length: "Write enough to be clear - short for simple, detailed for complex"
    nesting_depth: "Nest as deep as structure requires - 1 level for simple, 4+ for complex"
    templates_navigation: "Include only when needed - not required for single screen specs"
    per_screen_granularity: "Different screens can have different detail levels"

# ----------------------------------------------------------------------------
# VALIDATION RULES
# ----------------------------------------------------------------------------

validation:
  structure:
    - "template: >=1 region, exactly 1 type:content"
    - "region static/floating: >=1 block, content: no blocks"
    - "region.id unique within template"
    - "templateBlock.id unique within region"
    - "block.id unique within screen (including nested)"
    - "nested blocks: child.id unique within parent"
    - "nesting depth: 2-3 recommended, >3 warning"

  references:
    - "default_template -> existing template_id"
    - "screen.template -> existing template_id"
    - "navigation.items[].target -> existing screen_id"
    - "screen_groups[].screens[] -> existing screen_id"
    - "missing reference -> error"

  screen_groups:
    - "screen_groups[].id unique"
    - "screen in only one group (duplicate -> warning)"

  navigation:
    - "if navigation.items exists: >=1 template must have block type:main_navigation (else warning)"

  layout:
    - "columns sum <=12 per row (overflow wraps to new row)"
    - "incomplete row <12 -> warning"

  detailing:
    - "purpose: descriptive enough to convey intent (typically 20+ chars)"
    - "nesting: as deep as structure requires, no arbitrary limits"
    - "user intent takes priority over level guidelines"

  positioning:
    - "type:floating requires position: top-left|top-right|bottom-left|bottom-right|center"
    - "floating: absolute positioning, z-index 1000"
    - "fixed:true only for type:static (content/floating -> warning)"

  formats:
    - "container_max_width: valid CSS (px|%|rem|em|vw)"

# ----------------------------------------------------------------------------
# GRID LAYOUT
# ----------------------------------------------------------------------------

grid:
  system: "Bootstrap-like 12-column grid"
  usage: "columns field (1-12) defines block width, default: 12"
  examples: "12=full, 6=half, 4=third, 3=quarter, 8+4=2/3+1/3"
  overflow: "Sum >12 wraps to new row"
  responsive: "Mobile: blocks become full-width"

# ----------------------------------------------------------------------------
# COMMON PATTERNS
# ----------------------------------------------------------------------------

patterns:
  list_screen: "header (actions, filters) + content (table/grid)"
  detail_screen: "info sections + sidebar (actions, stats, related)"
  form_screen: "form sections + footer (save/cancel)"
  dashboard: "header (title, actions) + widgets (columns: 4,6,12)"
  wizard: "header (steps) + current step + footer (back/next/finish)"

  overlays:
    modal: "Modal dialog 'Title' (centered overlay). Form/content, Cancel/Submit buttons"
    drawer: "Drawer panel (slides from right). Content, Apply/Reset buttons"
    confirmation: "Modal dialog 'Confirm' (centered overlay). Warning text, Cancel/Confirm"
    popover: "Popover menu (appears near trigger). Menu items list"
    toast: "Toast notification (top-right). Message, auto-dismiss"
    trigger: "Button 'Action', onClick opens overlay_id"

# ----------------------------------------------------------------------------
# EVOLUTIONARY EXAMPLE (Notes App evolves L0->L3)
# ----------------------------------------------------------------------------

example_evolution:

  # LEVEL 0: Pure exploration
  L0:
    metadata:
      name: Notes App
      description: "Personal notes application with rich text editing, folder organization, and search"
    screens:
      dashboard:
        title: Dashboard
        purpose: "Overview of notes with quick stats"
      notes:
        title: Notes
        purpose: "Browse and manage all notes"
      editor:
        title: Note Editor
        purpose: "Create and edit individual notes"

  # LEVEL 1: +structure (description already required from L0)
  L1_adds:
    - "metadata.theme: modern minimal interface"
    - "navigation.items (if multiple screens)"
    - "screens[].blocks: blocks array"
    - "block.columns: grid positioning"
    - "block.purpose: describe function clearly"
  L1_example_block:
    id: stats
    columns: 12
    purpose: "Key metrics: total notes count, active drafts, archived notes"

  # LEVEL 2: +details
  L2_adds:
    - "metadata.background: subtle gradient from light blue to purple"
    - "metadata.palette: {primary: soft blue gradient, accent: warm orange}"
    - "templates (if screens share layout)"
    - "block.purpose: detailed function, behavior, interactions"
    - "nested blocks: as deep as structure needs"
  L2_example_block:
    id: note_card
    columns: 4
    purpose: "Interactive note card with hover effect. Shows title (bold, truncated 50 chars), favorite star (top right, toggleable), content preview (first 100 chars ellipsis), tags (horizontal list, colored badges), footer (date left, word count right). Click opens editor. Hover reveals quick actions."
    blocks:
      - id: card_header
        purpose: "Top section with title left (truncate overflow), favorite star right"
        blocks:
          - id: title_section
            purpose: "Title text, bold, single line with ellipsis"
          - id: favorite_star
            purpose: "Star icon, toggleable, shows active state when favorited"
      - id: card_body
        purpose: "Middle section with content preview and tags below"
      - id: card_footer
        purpose: "Bottom section with date left, word count right, subtle separator above"

  # LEVEL 3: +full control
  L3_adds:
    - "metadata.theme: glassmorphism design, outline flat SVG icons only (white, stroke 2px)"
    - "metadata.background: abstract gradient #E0F2FE to #F3E8FF, animated particles"
    - "metadata.palette: precise definitions (glass-primary: rgba(255,255,255,0.8) backdrop blur 20px)"
    - "templates: with precise regions if needed"
    - "block.purpose: exact specs (sizes, styles, animations) where needed"
    - "nesting: as deep as needed for full specification"
  L3_example_block:
    id: note_card
    columns: 4
    purpose: "Glass card: width 100%, max-width 400px, height auto (min 180px), padding 20px, margin-bottom 16px, border-radius 16px, glass-primary background, shadow-lg. Hover: scale 1.02, interactive-glow shadow, transition 200ms ease-out. Click: navigate to editor with fade 300ms. Header (margin-bottom 12px): flex row justify-between, gap 12px. Title (text-primary, 18px bold, line-height 1.4, flex-1, truncate single line). Favorite star (16px icon, clickable, toggle animation 150ms, active: yellow glow). Body (margin-bottom 16px): Content preview (text-dimmed, 14px, line-height 1.6, max 3 lines ellipsis). Tags (flex wrap, gap 8px, margin-top 12px, each tag: pill shape, glass-secondary background, padding 4px 12px, border-radius 12px, 12px font, text-primary). Footer (padding-top 12px, border-top 1px white opacity 0.1): flex row justify-between. Date (text-dimmed, 12px, calendar icon 14px left, gap 6px). Word count (text-dimmed, 12px). Quick actions menu: absolute top-right, opacity 0 default, opacity 1 on card hover, transition 150ms, glass-secondary background, padding 8px, border-radius 8px, shadow-md."
